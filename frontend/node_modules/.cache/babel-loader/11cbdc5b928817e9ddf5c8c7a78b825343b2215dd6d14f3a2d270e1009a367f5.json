{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pandi\\\\Code-Battle\\\\frontend\\\\src\\\\pages\\\\Room.js\",\n  _s = $RefreshSig$();\n// src/pages/Room.js\nimport React, { useEffect, useState } from \"react\";\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\nimport socket from \"../socket\";\nimport CodeEditor from \"../components/CodeEditor\";\nimport TestResultsPanel from \"../components/TestResultsPanel\";\nimport MatchResultsPanel from \"../components/MatchResultsPanel\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Room() {\n  _s();\n  var _location$state;\n  const {\n    roomId\n  } = useParams();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const username = ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.username) || `guest-${Math.floor(Math.random() * 1000)}`;\n  const [players, setPlayers] = useState([]);\n  const [playerEditors, setPlayerEditors] = useState({}); // { socketId: code }\n  const [scores, setScores] = useState({});\n  const [matchStarted, setMatchStarted] = useState(false);\n  const [isEvaluating, setIsEvaluating] = useState(false);\n\n  // Language selector\n  const [language, setLanguage] = useState(\"javascript\");\n  const [availableLanguages, setAvailableLanguages] = useState([]);\n  const [isLoadingLanguages, setIsLoadingLanguages] = useState(true);\n\n  // Challenge state\n  const [currentChallenge, setCurrentChallenge] = useState(null);\n\n  // Test results state\n  const [testResults, setTestResults] = useState(null);\n  const [isSubmissionResults, setIsSubmissionResults] = useState(false);\n\n  // Match results state\n  const [matchResults, setMatchResults] = useState(null);\n\n  // Track if current user is the room creator\n  const [isRoomCreator, setIsRoomCreator] = useState(false);\n  useEffect(() => {\n    socket.emit(\"join-room\", {\n      roomId,\n      username\n    }, resp => {\n      if (!resp || !resp.ok) {\n        alert(\"Failed to join room: \" + ((resp === null || resp === void 0 ? void 0 : resp.error) || \"unknown\"));\n        navigate(\"/\");\n      } else {\n        // If this is a new room, the current user is the creator\n        if (players.length === 0) {\n          setIsRoomCreator(true);\n        }\n      }\n    });\n    socket.on(\"player-list\", list => {\n      setPlayers(list);\n\n      // Ensure editor buffers exist\n      setPlayerEditors(prev => {\n        const updated = {\n          ...prev\n        };\n        list.forEach(p => {\n          if (!updated[p.socketId]) {\n            // If it's the current user, initialize with language template\n            if (p.socketId === socket.id) {\n              updated[p.socketId] = getStarterTemplate(language);\n            } else {\n              updated[p.socketId] = \"// waiting for code...\";\n            }\n          }\n        });\n        return updated;\n      });\n\n      // Ensure scores are present for all players\n      setScores(prev => {\n        const updated = {\n          ...prev\n        };\n        list.forEach(p => {\n          if (updated[p.socketId] == null) updated[p.socketId] = 0;\n        });\n        return updated;\n      });\n\n      // Check if current user is the room creator (first player to join)\n      if (list.length > 0 && list[0].socketId === socket.id) {\n        setIsRoomCreator(true);\n      } else {\n        setIsRoomCreator(false);\n      }\n    });\n    socket.on(\"all-codes\", codes => setPlayerEditors(codes));\n    socket.on(\"score-update\", updatedScores => setScores(updatedScores));\n    socket.on(\"match-started\", ({\n      scores: initialScores,\n      challenge\n    }) => {\n      setMatchStarted(true);\n      if (initialScores) setScores(initialScores);\n      if (challenge) setCurrentChallenge(challenge);\n    });\n\n    // Listen for new challenges\n    socket.on(\"new-challenge\", challenge => {\n      setCurrentChallenge(challenge);\n    });\n    socket.on(\"match-stopped\", ({\n      scores,\n      winners,\n      winnerDetails,\n      challengeDetails,\n      matchSummary\n    }) => {\n      setMatchStarted(false);\n      if (scores) setScores(scores);\n\n      // Display match results to all players\n      if (matchSummary) {\n        alert(matchSummary);\n      }\n\n      // Store winner information for display\n      setMatchResults({\n        winners: winnerDetails || [],\n        challenge: challengeDetails,\n        scores\n      });\n    });\n\n    // Listen for match errors\n    socket.on(\"match-error\", ({\n      error\n    }) => {\n      alert(error);\n    });\n\n    // Match error handling is now added\n\n    // We'll use our predefined languages instead of fetching all from the backend\n    // This keeps the language selection limited to the ones we want to support\n    const fetchLanguages = async () => {\n      setIsLoadingLanguages(true);\n      try {\n        // We'll still fetch from the backend to ensure our languages are supported\n        const response = await fetch(\"http://localhost:5000/api/runtimes\");\n        if (response.ok) {\n          const data = await response.json();\n          // Get the list of supported language IDs from the backend\n          const supportedLanguageIds = data.map(runtime => runtime.language);\n\n          // Filter our predefined languages to only include those supported by the backend\n          const filteredLanguages = [{\n            id: \"javascript\",\n            name: \"JavaScript\"\n          }, {\n            id: \"python\",\n            name: \"Python\"\n          }, {\n            id: \"java\",\n            name: \"Java\"\n          }, {\n            id: \"c\",\n            name: \"C\"\n          }, {\n            id: \"cpp\",\n            name: \"C++\"\n          }, {\n            id: \"csharp\",\n            name: \"C#\"\n          }, {\n            id: \"go\",\n            name: \"Go\"\n          }, {\n            id: \"ruby\",\n            name: \"Ruby\"\n          }, {\n            id: \"rust\",\n            name: \"Rust\"\n          }, {\n            id: \"php\",\n            name: \"PHP\"\n          }].filter(lang => supportedLanguageIds.includes(lang.id));\n          setAvailableLanguages(filteredLanguages);\n        } else {\n          // If API fails, use default languages\n          setAvailableLanguages([{\n            id: \"javascript\",\n            name: \"JavaScript\"\n          }, {\n            id: \"python\",\n            name: \"Python\"\n          }, {\n            id: \"java\",\n            name: \"Java\"\n          }]);\n        }\n      } catch (error) {\n        console.error(\"Failed to fetch languages:\", error);\n        // Use a minimal set of default languages if fetch fails\n        setAvailableLanguages([{\n          id: \"javascript\",\n          name: \"JavaScript\"\n        }, {\n          id: \"python\",\n          name: \"Python\"\n        }, {\n          id: \"java\",\n          name: \"Java\"\n        }]);\n      } finally {\n        setIsLoadingLanguages(false);\n      }\n    };\n    fetchLanguages();\n    return () => {\n      socket.emit(\"leave-room\", {\n        roomId\n      });\n      socket.off(\"player-list\");\n      socket.off(\"all-codes\");\n      socket.off(\"score-update\");\n      socket.off(\"match-started\");\n      socket.off(\"match-stopped\");\n      socket.off(\"new-challenge\");\n      socket.off(\"match-error\");\n\n      // Reset match state\n      setMatchResults(null);\n    };\n  }, [roomId, username, navigate]);\n  const handleCodeChange = (playerId, value) => {\n    setPlayerEditors(prev => ({\n      ...prev,\n      [playerId]: value\n    }));\n    socket.emit(\"code-change\", {\n      roomId,\n      code: value\n    });\n  };\n\n  // Generate starter code template based on selected language\n  const getStarterTemplate = lang => {\n    switch (lang) {\n      case 'javascript':\n        return '// JavaScript code\\nconsole.log(\"Hello, World!\");';\n      case 'python':\n        return '# Python code\\nprint(\"Hello, World!\")';\n      case 'java':\n        return '// Java code\\npublic class Main {\\n    public static void main(String[] args) {\\n        System.out.println(\"Hello, World!\");\\n    }\\n}';\n      case 'c':\n        return '// C code\\n#include <stdio.h>\\n\\nint main() {\\n    printf(\"Hello, World!\\n\");\\n    return 0;\\n}';\n      case 'cpp':\n        return '// C++ code\\n#include <iostream>\\n\\nint main() {\\n    std::cout << \"Hello, World!\" << std::endl;\\n    return 0;\\n}';\n      case 'csharp':\n        return '// C# code\\nusing System;\\n\\nclass Program {\\n    static void Main() {\\n        Console.WriteLine(\"Hello, World!\");\\n    }\\n}';\n      case 'go':\n        return '// Go code\\npackage main\\n\\nimport \"fmt\"\\n\\nfunc main() {\\n    fmt.Println(\"Hello, World!\")\\n}';\n      case 'ruby':\n        return '# Ruby code\\nputs \"Hello, World!\"';\n      case 'rust':\n        return '// Rust code\\nfn main() {\\n    println!(\"Hello, World!\");\\n}';\n      case 'php':\n        return '<?php\\n// PHP code\\necho \"Hello, World!\";\\n?>';\n      default:\n        return '// Write your code here';\n    }\n  };\n  const startMatch = () => socket.emit(\"start-match\", {\n    roomId\n  });\n  const stopMatch = () => socket.emit(\"stop-match\", {\n    roomId\n  });\n  const runOwnCode = async () => {\n    const code = playerEditors[socket.id] || \"\";\n    setIsEvaluating(true);\n    setTestResults(null); // Clear previous test results\n    try {\n      const resp = await fetch(\"http://localhost:5000/api/run\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          language,\n          // Now using the selected language from state\n          code,\n          stdin: \"\",\n          roomId,\n          socketId: socket.id // critical for awarding points\n        })\n      });\n      const data = await resp.json();\n      if (!resp.ok) {\n        alert((data === null || data === void 0 ? void 0 : data.error) || \"Run failed\");\n      } else {\n        // Display test results\n        console.log(\"Run result:\", data);\n        setTestResults(data.testResults || []);\n        setIsSubmissionResults(false);\n        if (data.passedTests === 0) {\n          // No tests passed\n          console.log(\"No tests passed.\");\n        } else if (data.passedTests === data.totalTests) {\n          // All tests passed\n          console.log(`All tests passed! (${data.passedTests}/${data.totalTests})`);\n        } else {\n          // Some tests passed\n          console.log(`${data.passedTests}/${data.totalTests} tests passed.`);\n        }\n\n        // Points are awarded server-side\n        if (data.pointsAwarded) {\n          console.log(`+${data.pointsAwarded} point(s) awarded!`);\n        }\n      }\n    } catch (e) {\n      alert(e.message || \"Network error\");\n    } finally {\n      setIsEvaluating(false);\n    }\n  };\n  const submitCode = async () => {\n    const code = playerEditors[socket.id] || \"\";\n    setIsEvaluating(true);\n    setTestResults(null); // Clear previous test results\n    try {\n      const resp = await fetch(\"http://localhost:5000/api/run\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          language,\n          // Using the selected language from state\n          code,\n          stdin: \"\",\n          roomId,\n          socketId: socket.id,\n          isSubmission: true // Flag to indicate this is a submission\n        })\n      });\n      const data = await resp.json();\n      if (!resp.ok) {\n        alert((data === null || data === void 0 ? void 0 : data.error) || \"Submission failed\");\n      } else {\n        // Display test results\n        console.log(\"Submission result:\", data);\n        setTestResults(data.testResults || []);\n        setIsSubmissionResults(true);\n        if (data.passedTests === 0) {\n          // No tests passed\n          alert(\"Your submission didn't pass any tests. No points awarded.\");\n        } else if (data.passedTests === data.totalTests) {\n          // All tests passed\n          alert(`Great job! Your solution passed all ${data.totalTests} test cases.`);\n        } else {\n          // Some tests passed\n          alert(`Your solution passed ${data.passedTests} out of ${data.totalTests} test cases.`);\n        }\n\n        // Points are awarded server-side\n        if (data.pointsAwarded) {\n          alert(`+${data.pointsAwarded} points awarded for passing hidden test cases!`);\n        }\n      }\n    } catch (e) {\n      alert(e.message || \"Network error\");\n    } finally {\n      setIsEvaluating(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main-content\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card fade-in\",\n        style: {\n          marginBottom: \"var(--space-xl)\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-header\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex justify-content-between align-items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              style: {\n                margin: 0,\n                fontSize: \"1.25rem\",\n                display: \"flex\",\n                alignItems: \"center\",\n                gap: \"8px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-gamepad\",\n                style: {\n                  color: \"var(--primary)\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 17\n              }, this), \" Room: \", roomId]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex gap-md align-items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group mb-0\",\n                children: /*#__PURE__*/_jsxDEV(\"select\", {\n                  className: \"form-control\",\n                  value: language,\n                  onChange: e => {\n                    const newLanguage = e.target.value;\n                    setLanguage(newLanguage);\n                    // Update code with template for the new language if current editor is empty or has default template\n                    if (socket.id && playerEditors[socket.id]) {\n                      const currentCode = playerEditors[socket.id];\n                      // Check if current code is empty or just a default template\n                      const isDefaultOrEmpty = currentCode.trim() === \"\" || availableLanguages.some(lang => currentCode === getStarterTemplate(lang.id));\n                      if (isDefaultOrEmpty) {\n                        const newTemplate = getStarterTemplate(newLanguage);\n                        handleCodeChange(socket.id, newTemplate);\n                      }\n                    }\n                  },\n                  disabled: availableLanguages.length === 0,\n                  style: {\n                    borderRadius: \"var(--radius-md)\",\n                    padding: \"8px 12px\"\n                  },\n                  children: availableLanguages.length === 0 ? /*#__PURE__*/_jsxDEV(\"option\", {\n                    children: \"No languages available\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 360,\n                    columnNumber: 23\n                  }, this) : availableLanguages.map(lang => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: lang.id,\n                    children: lang.name\n                  }, lang.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 363,\n                    columnNumber: 25\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 336,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 17\n              }, this), isRoomCreator && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: !matchStarted ? /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-primary\",\n                  onClick: startMatch,\n                  disabled: players.length < 2,\n                  title: players.length < 2 ? \"Need at least 2 players to start\" : \"\",\n                  style: {\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    gap: \"8px\",\n                    padding: \"8px 16px\",\n                    transition: \"all 0.3s ease\",\n                    animation: players.length >= 2 ? \"pulse 2s infinite\" : \"none\"\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-play\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 387,\n                    columnNumber: 25\n                  }, this), \" Start Match \", players.length < 2 ? \"(Need more players)\" : \"\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 373,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-warning\",\n                  onClick: stopMatch,\n                  style: {\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    gap: \"8px\",\n                    padding: \"8px 16px\"\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-stop\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 400,\n                    columnNumber: 25\n                  }, this), \" Stop Match\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 390,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"action-buttons\",\n        style: {\n          position: \"fixed\",\n          top: \"20px\",\n          right: \"20px\",\n          zIndex: 100,\n          display: \"flex\",\n          gap: \"10px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-success\",\n          onClick: runOwnCode,\n          disabled: !matchStarted || isEvaluating,\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-play-circle\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 424,\n            columnNumber: 13\n          }, this), \" \", isEvaluating ? \"Running...\" : \"Run Code\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: submitCode,\n          disabled: !matchStarted || isEvaluating,\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-check-circle\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 13\n          }, this), \" \", isEvaluating ? \"Submitting...\" : \"Submit\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 9\n      }, this), currentChallenge && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card fade-in\",\n        style: {\n          marginBottom: \"var(--space-xl)\",\n          boxShadow: \"var(--shadow-md)\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-header\",\n          style: {\n            borderBottom: \"2px solid var(--primary-light)\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              margin: 0,\n              fontSize: \"1.25rem\",\n              display: \"flex\",\n              alignItems: \"center\",\n              gap: \"8px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-code-branch\",\n              style: {\n                color: \"var(--primary)\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 440,\n              columnNumber: 17\n            }, this), \" Challenge: \", currentChallenge.title]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body\",\n          style: {\n            padding: \"var(--space-lg)\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              whiteSpace: \"pre-wrap\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                fontSize: \"1.1rem\",\n                lineHeight: \"1.6\",\n                backgroundColor: \"rgba(255, 255, 255, 0.05)\",\n                padding: \"var(--space-md)\",\n                borderRadius: \"var(--radius-md)\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                style: {\n                  color: \"var(--primary-light)\"\n                },\n                children: \"Description:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 446,\n                columnNumber: 19\n              }, this), \" \", currentChallenge.description]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 445,\n              columnNumber: 17\n            }, this), currentChallenge.constraints && /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                fontSize: \"1rem\",\n                backgroundColor: \"rgba(255, 255, 255, 0.03)\",\n                padding: \"var(--space-md)\",\n                borderRadius: \"var(--radius-md)\",\n                marginTop: \"var(--space-md)\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                style: {\n                  color: \"var(--warning)\"\n                },\n                children: \"Constraints:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 450,\n                columnNumber: 21\n              }, this), \" \", currentChallenge.constraints]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 449,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-grid\",\n              style: {\n                gridTemplateColumns: \"1fr 1fr\",\n                gap: \"20px\",\n                marginTop: \"var(--space-lg)\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  backgroundColor: \"var(--surface-light)\",\n                  padding: \"var(--space-md)\",\n                  borderRadius: \"var(--radius-md)\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    style: {\n                      color: \"var(--primary-light)\"\n                    },\n                    children: \"Example Input:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 455,\n                    columnNumber: 24\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 455,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n                  className: \"code-block\",\n                  style: {\n                    padding: \"var(--space-md)\",\n                    borderRadius: \"var(--radius-sm)\",\n                    border: \"1px solid var(--border-light)\"\n                  },\n                  children: currentChallenge.exampleInput\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 456,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 454,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  backgroundColor: \"var(--surface-light)\",\n                  padding: \"var(--space-md)\",\n                  borderRadius: \"var(--radius-md)\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    style: {\n                      color: \"var(--success)\"\n                    },\n                    children: \"Example Output:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 459,\n                    columnNumber: 24\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 459,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n                  className: \"code-block\",\n                  style: {\n                    padding: \"var(--space-md)\",\n                    borderRadius: \"var(--radius-sm)\",\n                    border: \"1px solid var(--border-light)\"\n                  },\n                  children: currentChallenge.exampleOutput\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 460,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 458,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 453,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                marginTop: \"var(--space-lg)\",\n                display: \"inline-block\",\n                padding: \"var(--space-xs) var(--space-md)\",\n                backgroundColor: currentChallenge.difficulty === \"Easy\" ? \"var(--success-light)\" : currentChallenge.difficulty === \"Hard\" ? \"var(--danger-light)\" : \"var(--warning-light)\",\n                borderRadius: \"var(--radius-full)\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Difficulty:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 464,\n                columnNumber: 19\n              }, this), \" \", currentChallenge.difficulty]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 463,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 11\n      }, this), !matchStarted && matchResults && /*#__PURE__*/_jsxDEV(MatchResultsPanel, {\n        matchResults: matchResults\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 43\n      }, this), testResults && testResults.length > 0 && /*#__PURE__*/_jsxDEV(TestResultsPanel, {\n        testResults: testResults,\n        isSubmission: isSubmissionResults\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card fade-in\",\n        style: {\n          marginBottom: \"var(--space-lg)\",\n          boxShadow: \"var(--shadow-md)\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-header\",\n          style: {\n            borderBottom: \"2px solid var(--primary-light)\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              margin: 0,\n              fontSize: \"1.25rem\",\n              display: \"flex\",\n              alignItems: \"center\",\n              gap: \"8px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-trophy\",\n              style: {\n                color: \"var(--warning)\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 486,\n              columnNumber: 15\n            }, this), \" Scores\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 485,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"score-list\",\n            style: {\n              listStyle: \"none\",\n              padding: 0,\n              margin: 0\n            },\n            children: players.map(p => {\n              var _scores$p$socketId;\n              return /*#__PURE__*/_jsxDEV(\"li\", {\n                className: p.socketId === socket.id ? \"current-user\" : \"\",\n                style: {\n                  padding: \"var(--space-md)\",\n                  margin: \"var(--space-xs) 0\",\n                  borderRadius: \"var(--radius-md)\",\n                  backgroundColor: p.socketId === socket.id ? \"rgba(67, 97, 238, 0.1)\" : \"var(--surface-light)\",\n                  border: p.socketId === socket.id ? \"1px solid var(--primary)\" : \"1px solid var(--border)\",\n                  display: \"flex\",\n                  justifyContent: \"space-between\",\n                  alignItems: \"center\",\n                  transition: \"all 0.3s ease\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    fontWeight: p.socketId === socket.id ? 600 : 400\n                  },\n                  children: [p.username, p.socketId === socket.id ? \" (You)\" : \"\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 507,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"score-value\",\n                  style: {\n                    fontWeight: \"bold\",\n                    backgroundColor: \"var(--surface)\",\n                    padding: \"var(--space-xs) var(--space-sm)\",\n                    borderRadius: \"var(--radius-full)\",\n                    minWidth: \"50px\",\n                    textAlign: \"center\",\n                    color: scores[p.socketId] > 0 ? \"var(--success)\" : \"var(--text-secondary)\"\n                  },\n                  children: (_scores$p$socketId = scores[p.socketId]) !== null && _scores$p$socketId !== void 0 ? _scores$p$socketId : 0\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 511,\n                  columnNumber: 19\n                }, this)]\n              }, p.socketId, true, {\n                fileName: _jsxFileName,\n                lineNumber: 492,\n                columnNumber: 17\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 490,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"info-text\",\n            style: {\n              marginTop: \"var(--space-lg)\",\n              padding: \"var(--space-md)\",\n              backgroundColor: \"rgba(255, 255, 255, 0.05)\",\n              borderRadius: \"var(--radius-md)\",\n              fontSize: \"0.9rem\",\n              color: \"var(--text-tertiary)\",\n              borderLeft: \"3px solid var(--primary-light)\"\n            },\n            children: \"Run: +1 point for passing visible test cases. Submit: +10 points per hidden test case passed.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 528,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 483,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"editors-grid\",\n        children: Array.from({\n          length: 4\n        }).map((_, idx) => {\n          var _scores$player$socket;\n          const player = players[idx];\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"editor-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"editor-header\",\n              children: player ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [player.username, player.socketId === socket.id && \" (You)\", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"editor-score\",\n                  children: [(_scores$player$socket = scores[player === null || player === void 0 ? void 0 : player.socketId]) !== null && _scores$player$socket !== void 0 ? _scores$player$socket : 0, \" pts\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 557,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true) : `Waiting for player ${idx + 1}...`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 552,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"editor-body\",\n              children: player ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: /*#__PURE__*/_jsxDEV(CodeEditor, {\n                  code: playerEditors[player.socketId] || \"\",\n                  onChange: value => handleCodeChange(player.socketId, value),\n                  readOnly: player.socketId !== socket.id,\n                  language: player.socketId === socket.id ? language : language,\n                  style: {\n                    width: \"100%\",\n                    height: \"100%\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 569,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"waiting-placeholder\",\n                children: \"Waiting for player...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 578,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 566,\n              columnNumber: 17\n            }, this)]\n          }, (player === null || player === void 0 ? void 0 : player.socketId) || idx, true, {\n            fileName: _jsxFileName,\n            lineNumber: 548,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 543,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 326,\n    columnNumber: 5\n  }, this);\n}\n_s(Room, \"hdcFCFBID0RaTBJc9x98iFrzjec=\", false, function () {\n  return [useParams, useLocation, useNavigate];\n});\n_c = Room;\nexport default Room;\nvar _c;\n$RefreshReg$(_c, \"Room\");","map":{"version":3,"names":["React","useEffect","useState","useLocation","useNavigate","useParams","socket","CodeEditor","TestResultsPanel","MatchResultsPanel","jsxDEV","_jsxDEV","Fragment","_Fragment","Room","_s","_location$state","roomId","location","navigate","username","state","Math","floor","random","players","setPlayers","playerEditors","setPlayerEditors","scores","setScores","matchStarted","setMatchStarted","isEvaluating","setIsEvaluating","language","setLanguage","availableLanguages","setAvailableLanguages","isLoadingLanguages","setIsLoadingLanguages","currentChallenge","setCurrentChallenge","testResults","setTestResults","isSubmissionResults","setIsSubmissionResults","matchResults","setMatchResults","isRoomCreator","setIsRoomCreator","emit","resp","ok","alert","error","length","on","list","prev","updated","forEach","p","socketId","id","getStarterTemplate","codes","updatedScores","initialScores","challenge","winners","winnerDetails","challengeDetails","matchSummary","fetchLanguages","response","fetch","data","json","supportedLanguageIds","map","runtime","filteredLanguages","name","filter","lang","includes","console","off","handleCodeChange","playerId","value","code","startMatch","stopMatch","runOwnCode","method","headers","body","JSON","stringify","stdin","log","passedTests","totalTests","pointsAwarded","e","message","submitCode","isSubmission","className","children","style","marginBottom","margin","fontSize","display","alignItems","gap","color","fileName","_jsxFileName","lineNumber","columnNumber","onChange","newLanguage","target","currentCode","isDefaultOrEmpty","trim","some","newTemplate","disabled","borderRadius","padding","onClick","title","transition","animation","position","top","right","zIndex","boxShadow","borderBottom","whiteSpace","lineHeight","backgroundColor","description","constraints","marginTop","gridTemplateColumns","border","exampleInput","exampleOutput","difficulty","listStyle","_scores$p$socketId","justifyContent","fontWeight","minWidth","textAlign","borderLeft","Array","from","_","idx","_scores$player$socket","player","readOnly","width","height","_c","$RefreshReg$"],"sources":["C:/Users/pandi/Code-Battle/frontend/src/pages/Room.js"],"sourcesContent":["// src/pages/Room.js\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\r\nimport socket from \"../socket\";\r\nimport CodeEditor from \"../components/CodeEditor\";\r\nimport TestResultsPanel from \"../components/TestResultsPanel\";\r\nimport MatchResultsPanel from \"../components/MatchResultsPanel\";\r\n\r\nfunction Room() {\r\n  const { roomId } = useParams();\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const username =\r\n    location.state?.username || `guest-${Math.floor(Math.random() * 1000)}`;\r\n\r\n  const [players, setPlayers] = useState([]);\r\n  const [playerEditors, setPlayerEditors] = useState({}); // { socketId: code }\r\n  const [scores, setScores] = useState({});\r\n  const [matchStarted, setMatchStarted] = useState(false);\r\n  const [isEvaluating, setIsEvaluating] = useState(false);\r\n\r\n  // Language selector\r\n  const [language, setLanguage] = useState(\"javascript\");\r\n  const [availableLanguages, setAvailableLanguages] = useState([]);\r\n  const [isLoadingLanguages, setIsLoadingLanguages] = useState(true);\r\n  \r\n  // Challenge state\r\n  const [currentChallenge, setCurrentChallenge] = useState(null);\r\n  \r\n  // Test results state\r\n  const [testResults, setTestResults] = useState(null);\r\n  const [isSubmissionResults, setIsSubmissionResults] = useState(false);\r\n  \r\n  // Match results state\r\n  const [matchResults, setMatchResults] = useState(null);\r\n\r\n\r\n  // Track if current user is the room creator\r\n  const [isRoomCreator, setIsRoomCreator] = useState(false);\r\n\r\n  useEffect(() => {\r\n    socket.emit(\"join-room\", { roomId, username }, (resp) => {\r\n      if (!resp || !resp.ok) {\r\n        alert(\"Failed to join room: \" + (resp?.error || \"unknown\"));\r\n        navigate(\"/\");\r\n      } else {\r\n        // If this is a new room, the current user is the creator\r\n        if (players.length === 0) {\r\n          setIsRoomCreator(true);\r\n        }\r\n      }\r\n    });\r\n\r\n    socket.on(\"player-list\", (list) => {\r\n      setPlayers(list);\r\n\r\n      // Ensure editor buffers exist\r\n      setPlayerEditors((prev) => {\r\n        const updated = { ...prev };\r\n        list.forEach((p) => {\r\n          if (!updated[p.socketId]) {\r\n            // If it's the current user, initialize with language template\r\n            if (p.socketId === socket.id) {\r\n              updated[p.socketId] = getStarterTemplate(language);\r\n            } else {\r\n              updated[p.socketId] = \"// waiting for code...\";\r\n            }\r\n          }\r\n        });\r\n        return updated;\r\n      });\r\n\r\n      // Ensure scores are present for all players\r\n      setScores((prev) => {\r\n        const updated = { ...prev };\r\n        list.forEach((p) => {\r\n          if (updated[p.socketId] == null) updated[p.socketId] = 0;\r\n        });\r\n        return updated;\r\n      });\r\n      \r\n      // Check if current user is the room creator (first player to join)\r\n      if (list.length > 0 && list[0].socketId === socket.id) {\r\n        setIsRoomCreator(true);\r\n      } else {\r\n        setIsRoomCreator(false);\r\n      }\r\n    });\r\n\r\n    socket.on(\"all-codes\", (codes) => setPlayerEditors(codes));\r\n    socket.on(\"score-update\", (updatedScores) => setScores(updatedScores));\r\n\r\n    socket.on(\"match-started\", ({ scores: initialScores, challenge }) => {\r\n      setMatchStarted(true);\r\n      if (initialScores) setScores(initialScores);\r\n      if (challenge) setCurrentChallenge(challenge);\r\n    });\r\n    \r\n    // Listen for new challenges\r\n    socket.on(\"new-challenge\", (challenge) => {\r\n      setCurrentChallenge(challenge);\r\n    });\r\n    socket.on(\"match-stopped\", ({ scores, winners, winnerDetails, challengeDetails, matchSummary }) => {\r\n      setMatchStarted(false);\r\n      if (scores) setScores(scores);\r\n      \r\n      // Display match results to all players\r\n      if (matchSummary) {\r\n        alert(matchSummary);\r\n      }\r\n      \r\n      // Store winner information for display\r\n      setMatchResults({\r\n        winners: winnerDetails || [],\r\n        challenge: challengeDetails,\r\n        scores\r\n      });\r\n    });\r\n    \r\n    // Listen for match errors\r\n    socket.on(\"match-error\", ({ error }) => {\r\n      alert(error);\r\n    });\r\n    \r\n    // Match error handling is now added\r\n\r\n    // We'll use our predefined languages instead of fetching all from the backend\r\n    // This keeps the language selection limited to the ones we want to support\r\n    const fetchLanguages = async () => {\r\n      setIsLoadingLanguages(true);\r\n      try {\r\n        // We'll still fetch from the backend to ensure our languages are supported\r\n        const response = await fetch(\"http://localhost:5000/api/runtimes\");\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          // Get the list of supported language IDs from the backend\r\n          const supportedLanguageIds = data.map(runtime => runtime.language);\r\n          \r\n          // Filter our predefined languages to only include those supported by the backend\r\n          const filteredLanguages = [\r\n            { id: \"javascript\", name: \"JavaScript\" },\r\n            { id: \"python\", name: \"Python\" },\r\n            { id: \"java\", name: \"Java\" },\r\n            { id: \"c\", name: \"C\" },\r\n            { id: \"cpp\", name: \"C++\" },\r\n            { id: \"csharp\", name: \"C#\" },\r\n            { id: \"go\", name: \"Go\" },\r\n            { id: \"ruby\", name: \"Ruby\" },\r\n            { id: \"rust\", name: \"Rust\" },\r\n            { id: \"php\", name: \"PHP\" }\r\n          ].filter(lang => supportedLanguageIds.includes(lang.id));\r\n          \r\n          setAvailableLanguages(filteredLanguages);\r\n        } else {\r\n          // If API fails, use default languages\r\n          setAvailableLanguages([\r\n            { id: \"javascript\", name: \"JavaScript\" },\r\n            { id: \"python\", name: \"Python\" },\r\n            { id: \"java\", name: \"Java\" }\r\n          ]);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Failed to fetch languages:\", error);\r\n        // Use a minimal set of default languages if fetch fails\r\n        setAvailableLanguages([\r\n          { id: \"javascript\", name: \"JavaScript\" },\r\n          { id: \"python\", name: \"Python\" },\r\n          { id: \"java\", name: \"Java\" }\r\n        ]);\r\n      } finally {\r\n        setIsLoadingLanguages(false);\r\n      }\r\n    };\r\n\r\n    fetchLanguages();\r\n\r\n    return () => {\r\n      socket.emit(\"leave-room\", { roomId });\r\n      socket.off(\"player-list\");\r\n      socket.off(\"all-codes\");\r\n      socket.off(\"score-update\");\r\n      socket.off(\"match-started\");\r\n      socket.off(\"match-stopped\");\r\n      socket.off(\"new-challenge\");\r\n      socket.off(\"match-error\");\r\n      \r\n      // Reset match state\r\n      setMatchResults(null);\r\n    };\r\n  }, [roomId, username, navigate]);\r\n\r\n  const handleCodeChange = (playerId, value) => {\r\n    setPlayerEditors((prev) => ({ ...prev, [playerId]: value }));\r\n    socket.emit(\"code-change\", { roomId, code: value });\r\n  };\r\n\r\n  // Generate starter code template based on selected language\r\n  const getStarterTemplate = (lang) => {\r\n    switch (lang) {\r\n      case 'javascript':\r\n        return '// JavaScript code\\nconsole.log(\"Hello, World!\");';\r\n      case 'python':\r\n        return '# Python code\\nprint(\"Hello, World!\")';\r\n      case 'java':\r\n        return '// Java code\\npublic class Main {\\n    public static void main(String[] args) {\\n        System.out.println(\"Hello, World!\");\\n    }\\n}';\r\n      case 'c':\r\n        return '// C code\\n#include <stdio.h>\\n\\nint main() {\\n    printf(\"Hello, World!\\n\");\\n    return 0;\\n}';\r\n      case 'cpp':\r\n        return '// C++ code\\n#include <iostream>\\n\\nint main() {\\n    std::cout << \"Hello, World!\" << std::endl;\\n    return 0;\\n}';\r\n      case 'csharp':\r\n        return '// C# code\\nusing System;\\n\\nclass Program {\\n    static void Main() {\\n        Console.WriteLine(\"Hello, World!\");\\n    }\\n}';\r\n      case 'go':\r\n        return '// Go code\\npackage main\\n\\nimport \"fmt\"\\n\\nfunc main() {\\n    fmt.Println(\"Hello, World!\")\\n}';\r\n      case 'ruby':\r\n        return '# Ruby code\\nputs \"Hello, World!\"';\r\n      case 'rust':\r\n        return '// Rust code\\nfn main() {\\n    println!(\"Hello, World!\");\\n}';\r\n      case 'php':\r\n        return '<?php\\n// PHP code\\necho \"Hello, World!\";\\n?>';\r\n      default:\r\n        return '// Write your code here';\r\n    }\r\n  };\r\n\r\n  const startMatch = () => socket.emit(\"start-match\", { roomId });\r\n  const stopMatch = () => socket.emit(\"stop-match\", { roomId });\r\n\r\n  const runOwnCode = async () => {\r\n    const code = playerEditors[socket.id] || \"\";\r\n    setIsEvaluating(true);\r\n    setTestResults(null); // Clear previous test results\r\n    try {\r\n      const resp = await fetch(\"http://localhost:5000/api/run\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          language, // Now using the selected language from state\r\n          code,\r\n          stdin: \"\",\r\n          roomId,\r\n          socketId: socket.id, // critical for awarding points\r\n        }),\r\n      });\r\n      const data = await resp.json();\r\n      if (!resp.ok) {\r\n        alert(data?.error || \"Run failed\");\r\n      } else {\r\n        // Display test results\r\n        console.log(\"Run result:\", data);\r\n        setTestResults(data.testResults || []);\r\n        setIsSubmissionResults(false);\r\n        \r\n        if (data.passedTests === 0) {\r\n          // No tests passed\r\n          console.log(\"No tests passed.\");\r\n        } else if (data.passedTests === data.totalTests) {\r\n          // All tests passed\r\n          console.log(`All tests passed! (${data.passedTests}/${data.totalTests})`);\r\n        } else {\r\n          // Some tests passed\r\n          console.log(`${data.passedTests}/${data.totalTests} tests passed.`);\r\n        }\r\n        \r\n        // Points are awarded server-side\r\n        if (data.pointsAwarded) {\r\n          console.log(`+${data.pointsAwarded} point(s) awarded!`);\r\n        }\r\n      }\r\n    } catch (e) {\r\n      alert(e.message || \"Network error\");\r\n    } finally {\r\n      setIsEvaluating(false);\r\n    }\r\n  };\r\n\r\n  const submitCode = async () => {\r\n    const code = playerEditors[socket.id] || \"\";\r\n    setIsEvaluating(true);\r\n    setTestResults(null); // Clear previous test results\r\n    try {\r\n      const resp = await fetch(\"http://localhost:5000/api/run\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          language, // Using the selected language from state\r\n          code,\r\n          stdin: \"\",\r\n          roomId,\r\n          socketId: socket.id,\r\n          isSubmission: true, // Flag to indicate this is a submission\r\n        }),\r\n      });\r\n      const data = await resp.json();\r\n      if (!resp.ok) {\r\n        alert(data?.error || \"Submission failed\");\r\n      } else {\r\n        // Display test results\r\n        console.log(\"Submission result:\", data);\r\n        setTestResults(data.testResults || []);\r\n        setIsSubmissionResults(true);\r\n        \r\n        if (data.passedTests === 0) {\r\n          // No tests passed\r\n          alert(\"Your submission didn't pass any tests. No points awarded.\");\r\n        } else if (data.passedTests === data.totalTests) {\r\n          // All tests passed\r\n          alert(`Great job! Your solution passed all ${data.totalTests} test cases.`);\r\n        } else {\r\n          // Some tests passed\r\n          alert(`Your solution passed ${data.passedTests} out of ${data.totalTests} test cases.`);\r\n        }\r\n        \r\n        // Points are awarded server-side\r\n        if (data.pointsAwarded) {\r\n          alert(`+${data.pointsAwarded} points awarded for passing hidden test cases!`);\r\n        }\r\n      }\r\n    } catch (e) {\r\n      alert(e.message || \"Network error\");\r\n    } finally {\r\n      setIsEvaluating(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"main-content\">\r\n      <div className=\"container\">\r\n        <div className=\"card fade-in\" style={{ marginBottom: \"var(--space-xl)\" }}>\r\n          <div className=\"card-header\">\r\n            <div className=\"d-flex justify-content-between align-items-center\">\r\n              <h2 style={{ margin: 0, fontSize: \"1.25rem\", display: \"flex\", alignItems: \"center\", gap: \"8px\" }}>\r\n                <i className=\"fas fa-gamepad\" style={{ color: \"var(--primary)\" }}></i> Room: {roomId}\r\n              </h2>\r\n              <div className=\"d-flex gap-md align-items-center\">\r\n                <div className=\"form-group mb-0\">\r\n                  <select \r\n                    className=\"form-control\"\r\n                    value={language} \r\n                    onChange={(e) => {\r\n                      const newLanguage = e.target.value;\r\n                      setLanguage(newLanguage);\r\n                      // Update code with template for the new language if current editor is empty or has default template\r\n                      if (socket.id && playerEditors[socket.id]) {\r\n                        const currentCode = playerEditors[socket.id];\r\n                        // Check if current code is empty or just a default template\r\n                        const isDefaultOrEmpty = currentCode.trim() === \"\" || \r\n                          availableLanguages.some(lang => \r\n                            currentCode === getStarterTemplate(lang.id));\r\n                        \r\n                        if (isDefaultOrEmpty) {\r\n                          const newTemplate = getStarterTemplate(newLanguage);\r\n                          handleCodeChange(socket.id, newTemplate);\r\n                        }\r\n                      }\r\n                    }}\r\n                    disabled={availableLanguages.length === 0}\r\n                    style={{ borderRadius: \"var(--radius-md)\", padding: \"8px 12px\" }}\r\n                  >\r\n                    {availableLanguages.length === 0 ? (\r\n                      <option>No languages available</option>\r\n                    ) : (\r\n                      availableLanguages.map((lang) => (\r\n                        <option key={lang.id} value={lang.id}>\r\n                          {lang.name}\r\n                        </option>\r\n                      ))\r\n                    )}\r\n                  </select>\r\n                </div>\r\n                {isRoomCreator && (\r\n                  <>\r\n                    {!matchStarted ? (\r\n                      <button \r\n                        className=\"btn btn-primary\" \r\n                        onClick={startMatch}\r\n                        disabled={players.length < 2}\r\n                        title={players.length < 2 ? \"Need at least 2 players to start\" : \"\"}\r\n                        style={{ \r\n                          display: \"flex\", \r\n                          alignItems: \"center\", \r\n                          gap: \"8px\",\r\n                          padding: \"8px 16px\",\r\n                          transition: \"all 0.3s ease\",\r\n                          animation: players.length >= 2 ? \"pulse 2s infinite\" : \"none\"\r\n                        }}\r\n                      >\r\n                        <i className=\"fas fa-play\"></i> Start Match {players.length < 2 ? \"(Need more players)\" : \"\"}\r\n                      </button>\r\n                    ) : (\r\n                      <button \r\n                        className=\"btn btn-warning\" \r\n                        onClick={stopMatch}\r\n                        style={{ \r\n                          display: \"flex\", \r\n                          alignItems: \"center\", \r\n                          gap: \"8px\",\r\n                          padding: \"8px 16px\"\r\n                        }}\r\n                      >\r\n                        <i className=\"fas fa-stop\"></i> Stop Match\r\n                      </button>\r\n                    )}\r\n                  </>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Run and Submit buttons */}\r\n        <div className=\"action-buttons\" style={{ \r\n          position: \"fixed\", \r\n          top: \"20px\", \r\n          right: \"20px\", \r\n          zIndex: 100,\r\n          display: \"flex\", \r\n          gap: \"10px\" \r\n        }}>\r\n          <button \r\n            className=\"btn btn-success\"\r\n            onClick={runOwnCode} \r\n            disabled={!matchStarted || isEvaluating} \r\n          >\r\n            <i className=\"fas fa-play-circle\"></i> {isEvaluating ? \"Running...\" : \"Run Code\"}\r\n          </button>\r\n          <button \r\n            className=\"btn btn-primary\"\r\n            onClick={submitCode} \r\n            disabled={!matchStarted || isEvaluating} \r\n          >\r\n            <i className=\"fas fa-check-circle\"></i> {isEvaluating ? \"Submitting...\" : \"Submit\"}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Challenge Display */}\r\n        {currentChallenge && (\r\n          <div className=\"card fade-in\" style={{ marginBottom: \"var(--space-xl)\", boxShadow: \"var(--shadow-md)\" }}>\r\n            <div className=\"card-header\" style={{ borderBottom: \"2px solid var(--primary-light)\" }}>\r\n              <h3 style={{ margin: 0, fontSize: \"1.25rem\", display: \"flex\", alignItems: \"center\", gap: \"8px\" }}>\r\n                <i className=\"fas fa-code-branch\" style={{ color: \"var(--primary)\" }}></i> Challenge: {currentChallenge.title}\r\n              </h3>\r\n            </div>\r\n            <div className=\"card-body\" style={{ padding: \"var(--space-lg)\" }}>\r\n              <div style={{ whiteSpace: \"pre-wrap\" }}>\r\n                <p style={{ fontSize: \"1.1rem\", lineHeight: \"1.6\", backgroundColor: \"rgba(255, 255, 255, 0.05)\", padding: \"var(--space-md)\", borderRadius: \"var(--radius-md)\" }}>\r\n                  <strong style={{ color: \"var(--primary-light)\" }}>Description:</strong> {currentChallenge.description}\r\n                </p>\r\n                {currentChallenge.constraints && (\r\n                  <p style={{ fontSize: \"1rem\", backgroundColor: \"rgba(255, 255, 255, 0.03)\", padding: \"var(--space-md)\", borderRadius: \"var(--radius-md)\", marginTop: \"var(--space-md)\" }}>\r\n                    <strong style={{ color: \"var(--warning)\" }}>Constraints:</strong> {currentChallenge.constraints}\r\n                  </p>\r\n                )}\r\n                <div className=\"d-grid\" style={{ gridTemplateColumns: \"1fr 1fr\", gap: \"20px\", marginTop: \"var(--space-lg)\" }}>\r\n                  <div style={{ backgroundColor: \"var(--surface-light)\", padding: \"var(--space-md)\", borderRadius: \"var(--radius-md)\" }}>\r\n                    <p><strong style={{ color: \"var(--primary-light)\" }}>Example Input:</strong></p>\r\n                    <pre className=\"code-block\" style={{ padding: \"var(--space-md)\", borderRadius: \"var(--radius-sm)\", border: \"1px solid var(--border-light)\" }}>{currentChallenge.exampleInput}</pre>\r\n                  </div>\r\n                  <div style={{ backgroundColor: \"var(--surface-light)\", padding: \"var(--space-md)\", borderRadius: \"var(--radius-md)\" }}>\r\n                    <p><strong style={{ color: \"var(--success)\" }}>Example Output:</strong></p>\r\n                    <pre className=\"code-block\" style={{ padding: \"var(--space-md)\", borderRadius: \"var(--radius-sm)\", border: \"1px solid var(--border-light)\" }}>{currentChallenge.exampleOutput}</pre>\r\n                  </div>\r\n                </div>\r\n                <p style={{ marginTop: \"var(--space-lg)\", display: \"inline-block\", padding: \"var(--space-xs) var(--space-md)\", backgroundColor: currentChallenge.difficulty === \"Easy\" ? \"var(--success-light)\" : currentChallenge.difficulty === \"Hard\" ? \"var(--danger-light)\" : \"var(--warning-light)\", borderRadius: \"var(--radius-full)\" }}>\r\n                  <strong>Difficulty:</strong> {currentChallenge.difficulty}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Match Results Panel - shown when match ends */}\r\n        {!matchStarted && matchResults && <MatchResultsPanel matchResults={matchResults} />}\r\n        \r\n        {/* Test Results Display */}\r\n        {testResults && testResults.length > 0 && (\r\n          <TestResultsPanel \r\n            testResults={testResults} \r\n            isSubmission={isSubmissionResults} \r\n          />\r\n        )}\r\n\r\n        {/* Scoreboard */}\r\n        <div className=\"card fade-in\" style={{ marginBottom: \"var(--space-lg)\", boxShadow: \"var(--shadow-md)\" }}>\r\n          <div className=\"card-header\" style={{ borderBottom: \"2px solid var(--primary-light)\" }}>\r\n            <h3 style={{ margin: 0, fontSize: \"1.25rem\", display: \"flex\", alignItems: \"center\", gap: \"8px\" }}>\r\n              <i className=\"fas fa-trophy\" style={{ color: \"var(--warning)\" }}></i> Scores\r\n            </h3>\r\n          </div>\r\n          <div className=\"card-body\">\r\n            <ul className=\"score-list\" style={{ listStyle: \"none\", padding: 0, margin: 0 }}>\r\n              {players.map((p) => (\r\n                <li \r\n                  key={p.socketId} \r\n                  className={p.socketId === socket.id ? \"current-user\" : \"\"}\r\n                  style={{ \r\n                    padding: \"var(--space-md)\", \r\n                    margin: \"var(--space-xs) 0\", \r\n                    borderRadius: \"var(--radius-md)\",\r\n                    backgroundColor: p.socketId === socket.id ? \"rgba(67, 97, 238, 0.1)\" : \"var(--surface-light)\",\r\n                    border: p.socketId === socket.id ? \"1px solid var(--primary)\" : \"1px solid var(--border)\",\r\n                    display: \"flex\",\r\n                    justifyContent: \"space-between\",\r\n                    alignItems: \"center\",\r\n                    transition: \"all 0.3s ease\"\r\n                  }}\r\n                >\r\n                  <span style={{ fontWeight: p.socketId === socket.id ? 600 : 400 }}>\r\n                    {p.username}\r\n                    {p.socketId === socket.id ? \" (You)\" : \"\"}\r\n                  </span>\r\n                  <span \r\n                    className=\"score-value\"\r\n                    style={{ \r\n                      fontWeight: \"bold\", \r\n                      backgroundColor: \"var(--surface)\", \r\n                      padding: \"var(--space-xs) var(--space-sm)\",\r\n                      borderRadius: \"var(--radius-full)\",\r\n                      minWidth: \"50px\",\r\n                      textAlign: \"center\",\r\n                      color: scores[p.socketId] > 0 ? \"var(--success)\" : \"var(--text-secondary)\"\r\n                    }}\r\n                  >\r\n                    {scores[p.socketId] ?? 0}\r\n                  </span>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n            <div className=\"info-text\" style={{ \r\n              marginTop: \"var(--space-lg)\", \r\n              padding: \"var(--space-md)\", \r\n              backgroundColor: \"rgba(255, 255, 255, 0.05)\", \r\n              borderRadius: \"var(--radius-md)\",\r\n              fontSize: \"0.9rem\",\r\n              color: \"var(--text-tertiary)\",\r\n              borderLeft: \"3px solid var(--primary-light)\"\r\n            }}>\r\n              Run: +1 point for passing visible test cases. Submit: +10 points per hidden test case passed.\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* 2x2 editors grid */}\r\n        <div className=\"editors-grid\">\r\n          {Array.from({ length: 4 }).map((_, idx) => {\r\n            const player = players[idx];\r\n\r\n            return (\r\n              <div\r\n                key={player?.socketId || idx}\r\n                className=\"editor-container\"\r\n              >\r\n                <div className=\"editor-header\">\r\n                  {player ? (\r\n                    <>\r\n                      {player.username}\r\n                      {player.socketId === socket.id && \" (You)\"}\r\n                      <span className=\"editor-score\">\r\n                        {scores[player?.socketId] ?? 0} pts\r\n                      </span>\r\n                    </>\r\n                  ) : (\r\n                    `Waiting for player ${idx + 1}...`\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"editor-body\">\r\n                  {player ? (\r\n                    <>\r\n                      <CodeEditor\r\n                        code={playerEditors[player.socketId] || \"\"}\r\n                        onChange={(value) => handleCodeChange(player.socketId, value)}\r\n                        readOnly={player.socketId !== socket.id}\r\n                        language={player.socketId === socket.id ? language : language}\r\n                        style={{ width: \"100%\", height: \"100%\" }}\r\n                      />\r\n                    </>\r\n                  ) : (\r\n                    <div className=\"waiting-placeholder\">\r\n                      Waiting for player...\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Room;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}